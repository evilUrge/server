{% extends "profile_template.html" %}

{% import 'macros/coach.html' as coach %}
{% import 'macros/profiles.html' as profile_macros %}

{% block meta_page_title %}Class Profile | {% endblock meta_page_title %}

{% block pagecss %}
    {{ super() }}
    {{ js_css_packages.css_package("studentlists") }}
{% endblock pagecss %}

{% block pagesubmenu %}
<span class="breadcrumbs_nav">
    <a href="/coaches" id="manage-coaches">נהלו מדריכים</a>
    <a href="/students" id="manage-students">נהלו תלמידים</a>
    <a href="/class_profile" id="class-stats" class="selected">מצב כיתה בשביל</a>
    <span id="studentlists_dropdown" style="display:none;">
        <a>{{ student_list.name|escape }}</a>
        <div id="studentlists_menu">
            <ol>
                {% for list in student_lists %}
                <li data-selected="{% if list.key == list_id %}selected{% endif %}" data-list_id={{ list.key }}>
                    <a href="/class_profile?list_id={{ list.key }}">{{list.name|escape}}</a>
                </li>
                {% endfor %}
            </ol>
        </div>
    </span>
</span>
{% endblock pagesubmenu %}

{% block statistics_title %}Class Statistics{% endblock statistics_title %}

{% block graph_accordion %}
<div id="high-level-class-stats">
    <span id="students-coached">
        <span class="profile-header-icon"><img src="/images/class-students-icon-shadow.png" /></span>
        <span class="count">
            <span id="count_students">&hellip;</span><br />
            <span class="label">תלמידים</span>
        </span>
    </span>
    <span id="energy-points">
        <span class="energy-points-badge">&hellip;</span><br />
        <span class="label">נקודות אנרגיה כיתתיות</span>
    </span>
</div>

    <ul id="nav-accordion">
        <li>
            {{ profile_macros.class_api_link(user_data_coach, "Progress Report", "progressreport", selected_graph_type, list_id) }}
            <div class="accordion-content">
                מראה לכם אילו תרגילים הכיתה שלכם עבדה עליהם והשלימה.
                <div class="graph-options">
                    <span class="progress-legend exercise-color started">התחילו</span>
                    <span class="progress-legend exercise-color proficient">מיומנים</span>
                    <span class="progress-legend exercise-color review light">סקירה</span>
                    <span class="progress-legend exercise-color struggling">מתקשים</span>
                </div>
            </div>
        </li>
        <li>
            {{ profile_macros.class_api_link(user_data_coach, "Progress Summary", "progress/summary", selected_graph_type, list_id) }}
            <p class="accordion-content">
                מראה לכם אילו תרגילים הכיתה שלכם עבדה עליהם והשלימה.
            </p>
        </li>
        <li>
            {{ profile_macros.class_graph_link(user_data_coach, "Daily Activity Report", "classtime", selected_graph_type, list_id) }}
            <p class="accordion-content">
                מראה לכם סכום כולל של הפעילות הכיתתית בתאריך מסוים. <br /><br />

              <span class="instructions">פעילות בכחול בהיר מראה שעות ביה"ס רגילות, כחול כהה זה שעות חיצוניות רגילות.</span>
        </li>
        <li>
            {{ profile_macros.class_graph_link(user_data_coach, "Exercise Progress Over Time", "classexercisesovertime", selected_graph_type, list_id) }}
            <div class="accordion-content">מראה לכם כמה תרגילים התלמידים שלכם השלימות במשך הזמן<br /><br />
                <span class="instructions">מרקר <a href="#" class="highlight-section show-students-highlight">תלמידים מסוימים</a> או <a href="#" class="highlight-section show-exercises-highlight">תרגילים מסוימים</a>.</span><br />

                <div id="students-highlight" class="vertical-choice-container" style="display:none;">
                    <ul>
                        <li>&hellip;</li>
                    </ul>
                </div>

                <div id="exercises-highlight" class="vertical-choice-container" style="display:none;">
                    <ul>
                        {% for exercise in exercises %}
                        <li>
                        <a href="#" class="highlight-exercise-points" data-exercise="{{ exercise.name|escape }}">{{ exercise.display_name|escape }}</a>
                        </li>
                        {% endfor %}
                    </ul>
                </div>

            </div>
        </li>
        <li>
            {{ profile_macros.class_graph_link(user_data_coach, "Class Points per Minute", "classenergypointsperminute", selected_graph_type, list_id) }}
            <p class="accordion-content">
                מראה את כמות נקודות האנרגיה לדקה של הכיתה שלכם כממוצע בעדכון רציף.
            </p>
        </li>
        <li>
            {{ profile_macros.class_api_link(user_data_coach, "Goals", "goals", selected_graph_type, list_id) }}
            <div class="accordion-content">
                מראה מטרות של תלמידים וההתקדמות אל השלמת אותן מטרות.
                <div class="graph-options">
                    <span class="progress-legend exercise-color started">התחילו</span>
                    <span class="progress-legend exercise-color proficient">מיומנים</span>
                    <span class="progress-legend goal-complete" title="Entire goal is complete">הושלמו</span>
                    <span class="progress-legend exercise-color struggling">מתקשים</span>
                </div>
            </div>
        </li>
    </ul>
{% endblock graph_accordion %}

{% block stats_filters %}
  <!-- the goals filter -->
  <div class="filter">
    {{ profile_macros.class_api_link(user_data_coach, "Progress Report", "progressreport", selected_graph_type, list_id) }}

    <div class="filter-block">
      <h3>דו"ח התקדמות</h3>
    </div>
    <div class="filter-block">
      <p>רק לראות
        <input type="text" id="student-progressreport-search" placeholder="תלמידים או תרגיל" class="search-input simple-input ui-corner-all blur-on-esc"></input>
        <span class="coach-filter-block">
            <input type="checkbox" class="progressreport-filter-check" id="progressreport-struggling" name="struggling" /><label for="progressreport-struggling">מתקשים</label></span>
      <span class="coach-filter-block"><input type="checkbox" class="progressreport-filter-check" id="progressreport-recent" name="recent" /><label for="progressreport-recent">עבדן עליו ב:</label>
            <select id="progressreport-filter-last-time"><option value="1">יום האחרון</option><option value="2">יומיים אחרונים</option><option value="3">שלושה ימים אחרונים</option><option selected value="7">שבוע אחרון</option><option value="30">חודש אחרון</option></select></span>
    </div>
  </div>

  <div class="filter">
    {{ profile_macros.class_api_link(user_data_coach, "Progress Summary", "progress/summary", selected_graph_type, list_id) }}

    <div class="filter-block">
      <h3>תקציר התקדמות</h3>
    </div>
    <div class="filter-block">
      <p>רק לראות
        <input type="text" id="student-progresssummary-search" placeholder="שם התרגיל" class="search-input simple-input ui-corner-all blur-on-esc"></input>
    </div>
  </div>

  <div class="filter">
    {{ profile_macros.class_graph_link(user_data_coach, "Daily Activity Report", "classtime", selected_graph_type, list_id) }}
    <div class="filter-block">
        <h3>דו"ח פעילות יומית <small> בשביל </small></h3>
        {{ profile_macros.graph_calendar_picker(user_data_coach, "classtime") }}
    </div>
  </div>

  <div class="filter">
    {{ profile_macros.class_api_link(user_data_coach, "Goals", "goals", selected_graph_type, list_id) }}

    <div class="filter-block">
      <h3>מטרות</h3>
      <p>ממוין לפי:
        <select id="student-goals-sort">
          <option value="name"> תלמידים </option>
          <option value="progress"> התקדמות </option>
          <option value="created"> התחיל לאחרונה </option>
          <option value="updated"> עודכן לאחרונה </option>
        </select>
      </p>
    </div>
    <div class="filter-block">
      <p>רק לראות
        <input type="text" id="student-goals-search" placeholder="תלמידים או מטרה" class="search-input simple-input ui-corner-all blur-on-esc"></input>
      <span class="coach-filter-block"><input type="checkbox" class="student-goals-filter-check" id="goal-most-recent-filter" name="most-recent" />
        <label for="goal-most-recent-filter">עודכן לאחרונה</label></span>
      <span class="coach-filter-block"><input type="checkbox" class="student-goals-filter-check" id="goal-in-progress-filter" name="in-progress" />
        <label for="goal-in-progress-filter">בהתקדמות</label></span>
      <span class="coach-filter-block"><input type="checkbox" class="student-goals-filter-check" id="goal-struggling-filter" name="struggling" />
        <label for="goal-struggling-filter">מתקשים</label>
      </span>
    </div>
  </div>
{% endblock %}

{% block profile_is_empty %}
{{ coach.empty_class_instructions(True) }}
{% endblock profile_is_empty %}

{% block bottompagescript %}
{{ super() }}
{{ js_css_packages.js_package("studentlists") }}
<script type="text/javascript">
$(function() {
    ClassProfile.studentLists = {{student_lists_json}};
    ClassProfile.initialGraphUrl = '{{ initial_graph_url|escapejs }}';
    ClassProfile.init();
})
</script>
{% endblock bottompagescript %}
